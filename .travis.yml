language: java
jdk: oraclejdk8
if: tag IS blank
before_install:
 - git checkout -b master
 - git checkout $TRAVIS_BRANCH
install: 
 - ./gradlew setupCiWorkspace
script: 
 - |
    if [ "$TRAVIS_BRANCH" == "pre-release" ]; then
      ./gradlew build makeChangelog curseforge299755 githubRelease
    else
      ./gradlew build
    fi

# deploy:
# - provider: releases
#   api_key: $GH_TOKEN
#   file_glob: true
#   file: build/libs/*
#   skip_cleanup: true
#   prerelease: true
#   on:
#     tags: true
#     branch: pre-release
  
# - provider: releases
#   api_key: $GH_TOKEN
#   file_glob: true
#   file: build/libs/*
#   skip_cleanup: true
#   prerelease: false
#   on:
#     tags: true
#     branch: release
